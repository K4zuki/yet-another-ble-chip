# DA14580をもう少し詳しく
`DA14580`は送受信時5mAの低消費電力を売りにした、Bluetooth Low Energy
規格のトランシーバICです。送受信時5mAは業界最小消費電力^[2016-1-1現在]
らしいです。


## パッケージ・外観・周辺部品

`DA14580`には３種類のパッケージがあります：

* **0.4ミリピッチWLCSP 34ボール(2.5x2.5mm) - DA14580-01UNA[^1.1]**
* **0.4ミリピッチQFN 40ピン(5.0x5.0mm) - DA14580-01AT2[^1.2]**
* **0.4ミリピッチQFN 48ピン(6.0x6.0mm) - DA14580-01A32[^1.3]**

WLCSPパッケージは外形が2.5ミリ角ですごく小さいです。
40/48ピンQFNは0.4ミリピッチなのでしんどいですがなんとか手ハンダできます。
`DA14580`は0.9V(単3電池)〜3.6V(コイン電池)のバッテリ電圧から内部電源を生成しますが、
電源電圧で周辺部品のつなげ方が変わります。
いずれの場合も2.2uHのインダクタと1uFのコンデンサが必要です。
よくある3.3V系のほうがセンサなどの周辺部品が多いと思うので
個人的にお勧めです。3.3V電源の場合IO電圧も3.3Vになります。
___5VトレラントIOではありません___。
後述する`村田モジュール`は3.3V系につながるように設計されています。
また、WLCSPパッケージ品を内蔵していますので使用できるIOピンはWLCSPパッケージに準拠します。

## ピン機能一覧表
<!--
Table: -- DA14580 ピン機能一覧 --

| Pin Name     | WLCSP34\* | QFN40 | QFN48 | Function | Reset State | Description                                                                                        |
|:-------------|:---------:|:-----:|:-----:|:--------:|:-----------:|:---------------------------------------------------------------------------------------------------|
| **[POWER]**  |           |       |       |          |             |                                                                                                    |
| VBAT3V       |     *     |   *   |   *   |   AIO    |             | 3.0V battery connection. exclusive use with VBAT1V                                                 |
| VBAT1V       |     *     |   *   |   *   |    AI    |             | 1.5V battery connection. exclusive use with VBAT3V. If VBAT3V is used this pin is connected to GND |
| SWITCH       |     *     |   *   |   *   |   AIO    |             | Switching node. connect to inductor                                                                |
| VDCDC        |     *     |   *   |   *   |    AO    |             | DCDC converter output                                                                              |
| GND          |     *     |   *   |   *   |   AIO    |             | Ground                                                                                             |
| VBAT_RF      |     *     |   *   |   *   |   AIO    |             | connect to VBAT3V                                                                                  |
| VDCDC_RF     |     *     |   *   |   *   |   AIO    |             | connect to VDCDC                                                                                   |
| VPP          |     *     |   *   |   *   |    AI    |             |                                                                                                    |
| RST          |     *     |   *   |   *   |    DI    |             | active-High reset input                                                                            |
| **[CLOCK]**  |           |       |       |          |             |                                                                                                    |
| XTAL16Mp     |     *     |   *   |   *   |    AI    |             | 16MHz XTAL input                                                                                   |
| XTAL16Mm     |     *     |   *   |   *   |    AO    |             | 16MHz XTAL output                                                                                  |
| XTAL32kp     |     *     |   *   |   *   |    AI    |             | 32.768kHz XTAL input                                                                               |
| XTAL32kp     |     *     |   *   |   *   |    AO    |             | 32.768kHz XTAL output                                                                              |
| [RADIO]      |           |       |       |          |             |                                                                                                    |
| RFIOp        |     *     |   *   |   *   |   AIO    |             | RFinput/output. Impedance 50$ohm$                                                                  |
| RFIOm        |     *     |   *   |   *   |   AIO    |             | RF ground                                                                                          |
| **[PORT 0]** |           |       |       |          |             |                                                                                                    |
| P0_0         |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD, used for primary bootloader                                         |
| P0_1         |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD, used for primary bootloader                                         |
| P0_2         |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD, used for primary bootloader                                         |
| P0_3         |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD, used for primary bootloader                                         |
| P0_4         |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD, used for primary bootloader                                         |
| P0_5         |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD, used for primary bootloader                                         |
| P0_6         |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD, used for primary bootloader                                         |
| P0_7         |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD, used for primary bootloader                                         |
| **[PORT 1]** |           |       |       |          |             |                                                                                                    |
| P1_0         |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P1_1         |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P1_2         |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P1_3         |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P1_4/SWCLK   |     *     |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD, SWCLK by default                                                    |
| P1_5/SWDIO   |     *     |   *   |   *   |   DIO    |    I-PU     | Digital I/O, selectable PU/PD, SWDIO by default                                                    |
| **[PORT 2]** |           |       |       |          |             |                                                                                                    |
| P2_0         |           |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P2_1         |           |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P2_2         |           |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P2_3         |           |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P2_4         |           |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P2_5         |           |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P2_6         |           |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P2_7         |           |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P2_8         |           |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P2_9         |           |   *   |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| **[PORT 3]** |           |       |       |          |             |                                                                                                    |
| P3_0         |           |       |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P3_1         |           |       |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P3_2         |           |       |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P3_3         |           |       |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P3_4         |           |       |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P3_5         |           |       |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P3_6         |           |       |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
| P3_7         |           |       |   *   |   DIO    |    I-PD     | Digital I/O, selectable PU/PD                                                                      |
-->

+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| PinName     | WLCSP34\* | QFN40 | QFN48 | Function | Reset State | Description                                                |
+=============+===========+=======+=======+==========+=============+============================================================+
| **[POWER]** |           |       |       |          |             |                                                            |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| VBAT3V      |   o       |   o   |   o   | AIO      |             | 3.0V battery connection. exclusive use with VBAT1V         |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| VBAT1V      |   o       |   o   |   o   | AI       |             | 1.5V battery connection. exclusive use with VBAT3V.        |
|             |           |       |       |          |             | If VBAT3V is used this pin is connected to GND             |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| SWITCH      |   o       |   o   |   o   | AIO      |             | Switching node. connect to inductor                        |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| VDCDC       |   o       |   o   |   o   | AO       |             | DCDC converter output                                      |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| GND         |   o       |   o   |   o   | AIO      |             | Ground                                                     |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| VBAT_RF     |   o       |   o   |   o   | AIO      |             | connect to VBAT3V                                          |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| VDCDC_RF    |   o       |   o   |   o   | AIO      |             | connect to VDCDC                                           |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| VPP         |   o       |   o   |   o   | AI       |             |                                                            |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| RST         |   o       |   o   |   o   | DI       |             | active-High reset input                                    |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| **[CLOCK]** |           |       |       |          |             |                                                            |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| XTAL16Mp    |   o       |   o   |   o   | AI       |             | 16MHz XTAL input                                           |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| XTAL16Mm    |   o       |   o   |   o   | AO       |             | 16MHz XTAL output                                          |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| XTAL32kp    |   o       |   o   |   o   | AI       |             | 32.768kHz XTAL input                                       |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| XTAL32kp    |   o       |   o   |   o   | AO       |             | 32.768kHz XTAL output                                      |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| **[RADIO]** |           |       |       |          |             |                                                            |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| RFIOp       |   o       |   o   |   o   | AIO      |             | RF input/output. Impedance 50 $ohm$                        |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| RFIOm       |   o       |   o   |   o   | AIO      |             | RF ground                                                  |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| **[PORT0]** |           |       |       |          |             |                                                            |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P0_0        |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD, used for primary bootloader |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P0_1        |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD, used for primary bootloader |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P0_2        |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD, used for primary bootloader |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P0_3        |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD, used for primary bootloader |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P0_4        |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD, used for primary bootloader |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P0_5        |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD, used for primary bootloader |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P0_6        |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD, used for primary bootloader |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P0_7        |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD, used for primary bootloader |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| **[PORT1]** |           |       |       |          |             |                                                            |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P1_0        |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P1_1        |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P1_3        |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P1_2        |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P1_4        |           |       |       |          |             |                                                            |
| SWCLK       |   o       |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD, SWCLK by default            |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P1_5        |           |       |       |          |             |                                                            |
| SWDIO       |   o       |   o   |   o   | DIO      | I-PU        | Digital I/O, selectable PU/PD, SWDIO by default            |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| **[PORT2]** |           |       |       |          |             |                                                            |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P2_0        |           |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P2_1        |           |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P2_2        |           |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P2_3        |           |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P2_4        |           |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P2_5        |           |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P2_6        |           |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P2_7        |           |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P2_8        |           |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P2_9        |           |   o   |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| **[PORT3]** |           |       |       |          |             |                                                            |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P3_0        |           |       |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P3_1        |           |       |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P3_2        |           |       |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P3_3        |           |       |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P3_4        |           |       |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P3_5        |           |       |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P3_6        |           |       |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+
| P3_7        |           |       |   o   | DIO      | I-PD        | Digital I/O, selectable PU/PD                              |
+-------------+-----------+-------+-------+----------+-------------+------------------------------------------------------------+

[^1.1]: http://www.digikey.jp/product-detail/ja/DA14580-01UNA/1564-1012-1-ND/5113991
[^1.2]: http://www.digikey.jp/product-detail/ja/DA14580-01AT2/1564-1013-1-ND/5113990
[^1.3]: http://www.digikey.jp/product-detail/ja/DA14580-01A32/1564-1014-1-ND/5113994
[^1.4]: Nordicが送受信時5.5mAという新シリーズを出しちゃいました。その新シリーズで旧型番と互換性があるモジュールも登場しました。やばいです(迫真)
